{"title":"Vue中的组件","date":"2019-08-11T00:29:48.000Z","slug":"vue-component","tags":["js","vue","前端"],"categories":["Vue"],"updated":"2019-08-14T07:45:22.835Z","content":"<style>\n    #exm{\n        text-align: left;\n    }\n    #exm iframe{\n        border: 2px #333 solid;\n        outline: none;\n        width:100%;\n    }\n    #exm button{\n        outline: none;\n        border: 2px #333 solid;\n        margin-top:10px;\n        background-color: #ddd;\n        padding: 10px;\n\n    }\n</style>\n\n<h2 id=\"示例\">示例<a href=\"post/vue-component#示例\"></a></h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button-counter</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">button-counter</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'button-counter'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        data:<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">                count: 0</span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;,</span></span><br><span class=\"line\"><span class=\"xml\">        template: '<span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"count++\"</span>&gt;</span>You have clicked me &#123;&#123;count&#125;&#125; times.<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span>'</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            contentFontSize: 1,</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div id=\"exm\">\n    <iframe id=\"exm\" src=\"http://host.lilpig.site/vue-exm/e11.html\"></iframe>\n    <a href=\"http://host.lilpig.site/vue-exm/e11.html\" target=\"_blank\" rel=\"noopener\"><button>在浏览器中运行</button></a>\n</div>\n\n<p>使用<code>Vue.component</code>注册一个全局的组件，组件名是第一个参数，第二个参数是这个组件的模板、数据等信息，然后就可以在html中使用这个组件了。</p>\n<h2 id=\"局部组件\">局部组件<a href=\"post/vue-component#局部组件\"></a></h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button-counter</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">button-counter</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> ButtonCounter = &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        data:<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">                count: 0</span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;,</span></span><br><span class=\"line\"><span class=\"xml\">        template: '<span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"count++\"</span>&gt;</span>You have clicked me &#123;&#123;count&#125;&#125; times.<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span>'</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            contentFontSize: 1,</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">        components:&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"string\">'button-counter'</span>: ButtonCounter</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>使用<code>components</code>可以指定依赖的组件，当你使用一些构建系统时可以使用<code>import</code>导入写好的组件并引用它。</p>\n<h2 id=\"Props\">Props<a href=\"post/vue-component#Props\"></a></h2><p><code>props</code>是组件和数据之间的接口，我们可以通过定义<code>props</code>来向组件中传递数据。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">user-profile</span> <span class=\"attr\">:username</span>=<span class=\"string\">\"user.username\"</span> <span class=\"attr\">:age</span>=<span class=\"string\">\"user.age\"</span> <span class=\"attr\">:gender</span>=<span class=\"string\">\"user.gender\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">user-profile</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'user-profile'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        props: [<span class=\"string\">'username'</span>,<span class=\"string\">'age'</span>,<span class=\"string\">'gender'</span>],</span></span><br><span class=\"line\"><span class=\"xml\">        template: '<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;&#123;username&#125;&#125; -- &#123;&#123;age&#125;&#125; -- &#123;&#123;gender&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>'</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            user: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                username: <span class=\"string\">'LILPIG'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">                age: 16,</span></span><br><span class=\"line\"><span class=\"javascript\">                gender: <span class=\"string\">'male'</span></span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>这样有些啰嗦，不过Vue的<code>props</code>支持直接传入对象。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">user-profile</span> <span class=\"attr\">:user</span>=<span class=\"string\">\"user\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">user-profile</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'user-profile'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        props: [<span class=\"string\">'user'</span>],</span></span><br><span class=\"line\"><span class=\"xml\">        template: '<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;&#123;user.username&#125;&#125; -- &#123;&#123;user.age&#125;&#125; -- &#123;&#123;user.gender&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>'</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            user: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                username: <span class=\"string\">'LILPIG'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">                age: 16,</span></span><br><span class=\"line\"><span class=\"javascript\">                gender: <span class=\"string\">'male'</span></span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"传入对象的所有属性\">传入对象的所有属性<a href=\"post/vue-component#传入对象的所有属性\"></a></h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">user-profile</span> <span class=\"attr\">v-bind</span>=<span class=\"string\">\"user\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">user-profile</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'user-profile'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        props: [<span class=\"string\">'username'</span>,<span class=\"string\">'age'</span>,<span class=\"string\">'gender'</span>],</span></span><br><span class=\"line\"><span class=\"xml\">        template: '<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;&#123;username&#125;&#125; -- &#123;&#123;age&#125;&#125; -- &#123;&#123;gender&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>'</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            user: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                username: <span class=\"string\">'LILPIG'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">                age: 16,</span></span><br><span class=\"line\"><span class=\"javascript\">                gender: <span class=\"string\">'male'</span></span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Props验证\">Props验证<a href=\"post/vue-component#Props验证\"></a></h2><p>可以验证Props的类型。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">user-profile</span> <span class=\"attr\">v-bind</span>=<span class=\"string\">\"user\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">user-profile</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'user-profile'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        props: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            username: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            age: <span class=\"built_in\">Number</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            gender: <span class=\"built_in\">String</span></span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;,</span></span><br><span class=\"line\"><span class=\"xml\">        template: '<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;&#123;username&#125;&#125; -- &#123;&#123;age&#125;&#125; -- &#123;&#123;gender&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>'</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            user: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                username: <span class=\"string\">'LILPIG'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                age: <span class=\"string\">'16'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                gender: <span class=\"string\">'male'</span></span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>props</code>中的age需要一个<code>Number</code>类型，但是传入的是一个字符串，打开控制台会看到这样的错误信息：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Vue warn]: Invalid prop: type check failed for prop &quot;age&quot;. Expected Number with value 16, got String with value &quot;16&quot;.</span><br></pre></td></tr></table></figure></p>\n<p>除此之外，你还可以这样定义<code>props</code>的验证规则：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'my-component'</span>, &#123;</span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 基础的类型检查 (`null` 和 `undefined` 会通过任何类型验证)</span></span><br><span class=\"line\">    propA: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 多个可能的类型</span></span><br><span class=\"line\">    propB: [<span class=\"built_in\">String</span>, <span class=\"built_in\">Number</span>],</span><br><span class=\"line\">    <span class=\"comment\">// 必填的字符串</span></span><br><span class=\"line\">    propC: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      required: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 带有默认值的数字</span></span><br><span class=\"line\">    propD: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">      <span class=\"keyword\">default</span>: <span class=\"number\">100</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 带有默认值的对象</span></span><br><span class=\"line\">    propE: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">Object</span>,</span><br><span class=\"line\">      <span class=\"comment\">// 对象或数组默认值必须从一个工厂函数获取</span></span><br><span class=\"line\">      <span class=\"keyword\">default</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123; <span class=\"attr\">message</span>: <span class=\"string\">'hello'</span> &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 自定义验证函数</span></span><br><span class=\"line\">    propF: &#123;</span><br><span class=\"line\">      validator: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 这个值必须匹配下列字符串中的一个</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> [<span class=\"string\">'success'</span>, <span class=\"string\">'warning'</span>, <span class=\"string\">'danger'</span>].indexOf(value) !== <span class=\"number\">-1</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"自定义事件\">自定义事件<a href=\"post/vue-component#自定义事件\"></a></h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">custom-component</span> @<span class=\"attr\">custom-event</span>=<span class=\"string\">\"onCustomEvent\"</span>&gt;</span>Custom Component<span class=\"tag\">&lt;/<span class=\"name\">custom-component</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'custom-component'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"xml\">        template: \"<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">slot</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">\\</span>\"<span class=\"attr\">sendEvent</span>\\\"&gt;</span>\\n\" +</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"            Send Event\\n\"</span> +</span></span><br><span class=\"line\"><span class=\"xml\">            \"        <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>\",</span></span><br><span class=\"line\"><span class=\"undefined\">        methods: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            sendEvent: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"custom-event\"</span>);</span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">        methods: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            onCustomEvent: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                alert(<span class=\"string\">\"On Custom Event\"</span>);</span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>可以像如上一样自定义一个事件，利用<code>$emit</code>函数和<code>v-on</code>。</p>\n<h2 id=\"插槽\">插槽<a href=\"post/vue-component#插槽\"></a></h2><p>在上面的示例中，<code>custom-component</code>的模板中有一对<code>slot</code>标签，里面没有任何内容。如果你删掉这个标签，那么你会发现我们引用这个组件时在其中写的文字<code>Custom Component</code>没了。</p>\n<p>Vue在渲染组件时会把组件中的内容放到插槽中，如果组件模板没有定义插槽那么将会舍弃内容。</p>\n<p>插槽中可以提供一个默认的备用值，在组件引用时没有填写内容时显示。</p>\n<h3 id=\"具名插槽\">具名插槽<a href=\"post/vue-component#具名插槽\"></a></h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">page</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-slot:header</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>Header<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            Hello,World</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-slot:footer</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>Footer<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">page</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'page'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"xml\">        template: '<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container\"</span>&gt;</span>\\n' +</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"string\">'    &lt;header&gt;\\n'</span> +</span></span><br><span class=\"line\"><span class=\"xml\">            '        <span class=\"tag\">&lt;<span class=\"name\">slot</span> <span class=\"attr\">name</span>=<span class=\"string\">\"header\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span>\\n' +</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"string\">'    &lt;/header&gt;\\n'</span> +</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"string\">'    &lt;main&gt;\\n'</span> +</span></span><br><span class=\"line\"><span class=\"xml\">            '        <span class=\"tag\">&lt;<span class=\"name\">slot</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span>\\n' +</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"string\">'    &lt;/main&gt;\\n'</span> +</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"string\">'    &lt;footer&gt;\\n'</span> +</span></span><br><span class=\"line\"><span class=\"xml\">            '        <span class=\"tag\">&lt;<span class=\"name\">slot</span> <span class=\"attr\">name</span>=<span class=\"string\">\"footer\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span>\\n' +</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"string\">'    &lt;/footer&gt;\\n'</span> +</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"string\">'&lt;/div&gt;'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span></span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>可以给插槽取个名字，然后使用<code>template</code>标签来包裹插入的内容。默认的名字是<code>default</code>。</p>\n<p>插槽访问数据是很必要的一件事。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">custom-component</span> <span class=\"attr\">:user</span>=<span class=\"string\">\"user\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-slot:default</span>=<span class=\"string\">\"slotProps\"</span>&gt;</span></span><br><span class=\"line\">            &#123;&#123;slotProps.user.name&#125;&#125; -- &#123;&#123;slotProps.user.age&#125;&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">custom-component</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'custom-component'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        props:[<span class=\"string\">'user'</span>],</span></span><br><span class=\"line\"><span class=\"xml\">        template: \"<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">slot</span> <span class=\"attr\">:user</span>=<span class=\"string\">'user'</span>&gt;</span>&#123;&#123;user.name&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>\"</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            user: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                name: <span class=\"string\">\"LILPIG\"</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">                age: 16,</span></span><br><span class=\"line\"><span class=\"javascript\">                gender: <span class=\"string\">\"male\"</span></span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"is\">is<a href=\"post/vue-component#is\"></a></h2><p>is属性可以指定当前的模板使用哪个组件，这个可以用来制作标签页功能。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demo\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">v-for</span>=<span class=\"string\">\"tab in tabs\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">v-bind:key</span>=<span class=\"string\">\"tab\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">v-bind:class</span>=<span class=\"string\">\"['tab-button', &#123; active: currentTab === tab &#125;]\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">v-on:click</span>=<span class=\"string\">\"currentTab = tab\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span>&#123;&#123; tab &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">component</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">v-bind:is</span>=<span class=\"string\">\"currentTabComponent\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">class</span>=<span class=\"string\">\"tab\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">component</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'tab-home'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"xml\">        template: \"<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Home Page<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>\"</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'tab-post'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"xml\">        template: \"<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Post Page<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>\"</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            currentTab: <span class=\"string\">'Home'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            tabs: [<span class=\"string\">'Home'</span>,<span class=\"string\">'Post'</span>]</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">        computed:&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            currentTabComponent: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">return</span> <span class=\"string\">'tab-'</span> + <span class=\"keyword\">this</span>.currentTab.toLowerCase();</span></span><br><span class=\"line\"><span class=\"undefined\">            &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div id=\"exm\">\n    <iframe id=\"exm\" src=\"http://host.lilpig.site/vue-exm/e16.html\"></iframe>\n    <a href=\"http://host.lilpig.site/vue-exm/e16.html\" target=\"_blank\" rel=\"noopener\"><button>在浏览器中运行</button></a>\n</div>\n\n<p>每次vue都是重新渲染这个组件，这会导致丢失换页前用户的操作，比如选中checkbox，所以分页功能需要保存页面状态。可以通过添加<code>keep-alive</code>标签实现缓存功能。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">component</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">v-bind:is</span>=<span class=\"string\">\"currentTabComponent\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">class</span>=<span class=\"string\">\"tab\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">component</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"组件中的v-model\">组件中的v-model<a href=\"post/vue-component#组件中的v-model\"></a></h2><p>我们自己编写的组件也可以使用<code>v-model</code>，<code>v-model</code>中的变量会动态传入给组件<code>props</code>中的<code>value</code>，这是固定的。这是组件的父节点到组件的单向绑定，而从组件到父节点的绑定需要在组件中用<code>$emit</code>发射<code>input</code>事件。</p>\n<p>如下代码可以将<code>message</code>和<code>my-input</code>组件进行双向绑定，无论哪边的数据更改了都会响应。<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">my-input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"message\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">my-input</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">\tVue.component(<span class=\"string\">'my-input'</span>,&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\tprops: [<span class=\"string\">'value'</span>],</span></span><br><span class=\"line\"><span class=\"xml\">\t\ttemplate: '<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">:value</span>=<span class=\"string\">\"value\"</span> @<span class=\"attr\">input</span>=<span class=\"string\">\"emitEvent\"</span>/&gt;</span>\\</span></span><br><span class=\"line\"><span class=\"xml\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>',</span></span><br><span class=\"line\"><span class=\"undefined\">\t\tmethods: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\temitEvent: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">this</span>.$emit(<span class=\"string\">'input'</span>,event.target.value);</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"undefined\">\t&#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\tel: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">\t\tdata: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\tmessage: <span class=\"string\">'Hello,World!'</span></span></span><br><span class=\"line\"><span class=\"undefined\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"undefined\">\t&#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n","next":{"title":"（八）活跃性问题 —— 《Java并发编程实战》","slug":"thread4j-c9-liveness-problem"},"link":"http://lilpig.site/post/vue-component/","toc":[{"title":"示例","id":"示例","index":"1"},{"title":"局部组件","id":"局部组件","index":"2"},{"title":"Props","id":"Props","index":"3","children":[{"title":"传入对象的所有属性","id":"传入对象的所有属性","index":"3.1"}]},{"title":"Props验证","id":"Props验证","index":"4"},{"title":"自定义事件","id":"自定义事件","index":"5"},{"title":"插槽","id":"插槽","index":"6","children":[{"title":"具名插槽","id":"具名插槽","index":"6.1"}]},{"title":"is","id":"is","index":"7"},{"title":"组件中的v-model","id":"组件中的v-model","index":"8"}],"reward":true,"copyright":{"author":"LIL PIG","link":"<a href=\"http://lilpig.site/post/vue-component/\" title=\"Vue中的组件\">http://lilpig.site/post/vue-component/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}