{"title":"Vue组件实例","date":"2019-08-15T02:29:48.000Z","slug":"vue-component-exm","tags":["js","vue","前端"],"categories":["Vue"],"updated":"2019-08-15T03:50:18.512Z","content":"<p>看Vue官方文档，看完发现太过理论，到自己手里啥也写不出来，于是又看了本叫《Vue.js实战》的书，然后跟着写了俩组件的实例。</p>\n<h2 id=\"数字输入框\">数字输入框<a href=\"post/vue-component-exm#数字输入框\"></a></h2><p>编写一个只能输入数字的输入框，并且提供加减按钮。</p>\n<div class=\"article-img\"><p><img src=\"http://nsimg.cn-bj.ufileos.com/img-1565836997751.jpg\" alt=\"图片\" data-zoomable></p></div>\n<p>这个需求乍一看用纯的html和js也不难实现，用vue是在是有些小题大做了，不过练习嘛。。</p>\n<p>分析需求，我们需要让我们的组件内部和引用组件的地方进行双向数据绑定，所以要提供我们自己的<code>v-model</code>。我们打算把这个组件分成两个文件来实现。</p>\n<ul>\n<li>index.html<br>  html模板文件</li>\n<li>input_number.js<br>  组件文件</li>\n</ul>\n<p>先看下html模板的代码，比较简单：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes\"</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input-number</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"value\"</span> <span class=\"attr\">:max</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">:min</span>=<span class=\"string\">\"0\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">input-number</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./input_number.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tel: <span class=\"string\">'#app'</span>,</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t\t\tdata: &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t\t\t\tvalue: 5</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t\t&#125;)</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>这个代码非常简单并且说明了我们的组件所提供的<code>props</code>参数，提供了三个<code>prop</code>，分别是用于数据绑定的<code>value</code>，用于限定输入最大值的<code>max</code>，用于限定输入最小值的<code>min</code>。</p>\n<p>因为使用<code>v-model</code>，所以我们需要在组件中发射<code>input</code>事件告诉vue根节点更新<code>value</code>。这在上一篇笔记中有提到，详见<a href=\"https://lilpig.site/post/vue-component#%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84v-model\">组件中的v-model</a>。</p>\n<p>我们再开始编写<code>input_number.js</code>：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'input-number'</span>,&#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'&lt;div class=\"input-number\"&gt;\\</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t&lt;input type=\"text\" :value=\"currentValue\" @input=\"handleChange\"&gt;\\</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t&lt;button @click=\"handleDown\" :disabled=\"currentValue &lt;= min\"&gt;-&lt;/button&gt;\\</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t&lt;button @click=\"handleUp\" :disabled=\"currentValue &gt;= max\"&gt;+&lt;/button&gt;\\</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t&lt;/div&gt;'</span>,</span><br><span class=\"line\">\tprops: &#123;</span><br><span class=\"line\">\t\tmax: &#123;</span><br><span class=\"line\">\t\t\ttype: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">default</span>: <span class=\"literal\">Infinity</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tmin: &#123;</span><br><span class=\"line\">\t\t\ttype: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">default</span>: -<span class=\"literal\">Infinity</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tvalue: &#123;</span><br><span class=\"line\">\t\t\ttype: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">default</span>: <span class=\"number\">0</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tdata: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\tcurrentValue: <span class=\"keyword\">this</span>.value</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//...</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>我们先写一部分，把模板和<code>props</code>编写了，上面的代码我们把max和min分别设置成了正负无穷，并把<code>currentValue</code>初始化为从父控件中通过<code>v-model</code>传递进来的<code>value</code>，而且我们模板中的<code>input</code>绑定了<code>value</code>为<code>currentValue</code>，这是一个单向绑定，也就是说输入框中的值改变时<code>currentValue</code>并不会直接改变，而是提供了一个<code>@input=&quot;handleChange&quot;</code>让输入时通过<code>handleChange</code>函数设置<code>currentValue</code>的值来完成双向数据绑定，这不是多此一举，因为我们做的是数字输入框，所以要在<code>handleChange</code>方法中验证输入数据的合法性。</p>\n<p><code>handleDown</code>和<code>handleUp</code>很好理解，就是加一减一的方法，这两个按钮通过<code>:disabled</code>来实现不满足条件下按钮不允许使用。</p>\n<p>接下来看看这些方法都是怎么工作的：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    updateValue: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">val</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(val&gt;<span class=\"keyword\">this</span>.max)val=<span class=\"keyword\">this</span>.max;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(val&lt;<span class=\"keyword\">this</span>.min)val=<span class=\"keyword\">this</span>.min;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.currentValue = val;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    handleUp: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.currentValue&lt;<span class=\"keyword\">this</span>.max)<span class=\"keyword\">this</span>.currentValue++;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    handleDown: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.currentValue&gt;<span class=\"keyword\">this</span>.min)<span class=\"keyword\">this</span>.currentValue--;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    handleChange: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> val = event.target.value.trim();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>((<span class=\"regexp\">/^\\d+$/</span>).test(val))&#123;</span><br><span class=\"line\">            val = <span class=\"built_in\">Number</span>(val);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(val&gt;<span class=\"keyword\">this</span>.max)val=<span class=\"keyword\">this</span>.max;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(val&lt;<span class=\"keyword\">this</span>.min)val=<span class=\"keyword\">this</span>.min;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.currentValue == val) event.target.value = val;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.currentValue = val;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            event.target.value = <span class=\"keyword\">this</span>.currentValue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">watch: &#123;</span><br><span class=\"line\">    currentValue: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">val</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'input'</span>,val);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    value: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">val</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.updateValue(val);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">mounted: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.updateValue(<span class=\"keyword\">this</span>.value);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>首先这些方法大多是通过修改<code>currentValue</code>来完成的，并且我们监听了<code>currentValue</code>的修改事件，如果修改了就发出一个<code>input</code>事件给父级，这个事件会被父级的<code>v-model</code>接收，完成父级的数据双向绑定。</p>\n<p>这些方法本身没什么好说的，都挺简单，和vue也没啥关系。就不说了。</p>\n<p>在Vue这种基于数据驱动的js库中，中尽量不要手动操作dom，有什么需求请先考虑是否能用修改数据实现。</p>\n<p><em>PS:这个例子和原书中的有些区别，因为我觉得原书中的这个示例写的确实有很多问题，但是尊重原书，大部分还是按照原书的逻辑写的</em></p>\n<h3 id=\"练习\">练习<a href=\"post/vue-component-exm#练习\"></a></h3><ol>\n<li><p>输入框聚焦时按键盘的上下键完成加一减一操作。<br> 只需要在模板的输入框中添加如下内容：</p>\n <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> @<span class=\"attr\">keyup.up</span>=<span class=\"string\">\"handleUp\"</span> @<span class=\"attr\">keyup.down</span>=<span class=\"string\">\"handleDown\"</span> <span class=\"attr\">:value</span>=<span class=\"string\">\"currentValue\"</span> @<span class=\"attr\">input</span>=<span class=\"string\">\"handleChange\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p> 详见Vue官方文档事件篇</p>\n</li>\n<li><p>增加一个控制步数的<code>prop - step</code>，用于控制加减操作一次加减的值<br> 略</p>\n<h2 id=\"标签页\"><a href=\"#标签页\" class=\"headerlink\" title=\"标签页\"></a>标签页</h2><p>下面写一个标签页功能，这个挺帅的</p>\n</li>\n</ol>\n<div class=\"article-img\"><p><img src=\"http://nsimg.cn-bj.ufileos.com/img-1565839315027.jpg\" alt=\"图片\" data-zoomable></p></div>\n<p>没错，只是我的css写的有点丑而已，人家书里的示例挺好看的。。。</p>\n<p>分析一下，首先我把这个分成两个组件，一个是上面的标签，一个是底下的面板。</p>\n<p>我们将会在html模板中这样使用它：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tab</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">pane</span> <span class=\"attr\">label</span>=<span class=\"string\">\"FIRST\"</span> <span class=\"attr\">closable</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">            FIRST PANE</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                    var message = \"Helo,Vue\";<span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">                    console.log(message);</span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                    &gt;&gt;&gt; Helo,Vue</span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">pane</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">pane</span> <span class=\"attr\">label</span>=<span class=\"string\">\"SECOND\"</span>&gt;</span>SECOND PANE<span class=\"tag\">&lt;/<span class=\"name\">pane</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">pane</span> <span class=\"attr\">label</span>=<span class=\"string\">\"THRID\"</span> <span class=\"attr\">closable</span>=<span class=\"string\">\"true\"</span>&gt;</span>THRID PANE<span class=\"tag\">&lt;/<span class=\"name\">pane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tab</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>通过一个<code>tab</code>标签包裹住一些<code>pane</code>，<code>tab</code>会自动地获取每个<code>pane</code>的名字（label），然后自动生成对应的顶部标签。</p>\n<p>在<code>pane</code>标签中必须指定一个<code>label</code>作为对应顶部标签的标题，closable是一个可选项，为<code>true</code>代表这个标签页可以关闭。</p>\n<p>现在我们知道该如何使用这个组件了，那么下一步就是思考如何实现它。首先我们分成两个js，<code>tab.js</code>和<code>pane.js</code>。<code>tab.js</code>主要负责顶部的所有标签和设置当前显示的标签。因为所有的标签都在<code>tab</code>标签中，所以要提供一个插槽。</p>\n<p>因为顶部标签有多少完全依赖于tab的子元素中有多少个pane，这是不定的，所以我们要用<code>v-for</code>来循环生成。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'tab'</span>,&#123;</span><br><span class=\"line\">   template: <span class=\"string\">'&lt;div&gt;'</span> +</span><br><span class=\"line\">       <span class=\"string\">'&lt;div class=\"tab\" v-for=\"(nav,index) in navList\" @click=\"handleChange(index)\" :class=\"&#123;active: currentIndex == index&#125;\"&gt;&#123;&#123;nav.label&#125;&#125;&lt;/div&gt;'</span> +</span><br><span class=\"line\">       <span class=\"string\">'&lt;div class=\"pane-container\"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;'</span>+</span><br><span class=\"line\">       <span class=\"string\">'&lt;/div&gt;'</span>,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>如上是我们根据需求编写的组件模板，因为涉及到样式，所以还绑定了一些class。这其中引用了一些方法和变量，<code>navList</code>就是通过遍历子元素中的<code>pane</code>得来的标签列表，<code>currentIndex</code>用来记录当前页面的下标，<code>handleChange</code>用来更改页面。</p>\n<p>我们先搞定这个<code>navList</code>，要搞定它就要遍历子元素，除非在做这种独立组件时，否则不推荐在vue中直接获取父子元素，这会让数据流向变得难以控制。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    getTabs: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.$children.filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">child</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> child.$options.name === <span class=\"string\">\"pane\"</span>;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">mounted: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _this = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.getTabs().forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pane,index</span>) </span>&#123;</span><br><span class=\"line\">        _this.navList.push(&#123;</span><br><span class=\"line\">            name: pane.name || index,</span><br><span class=\"line\">            label: pane.label,</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.currentIndex = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">data: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        navList: [],</span><br><span class=\"line\">        currentIndex: <span class=\"number\">-1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>我们在挂载完毕时通过遍历<code>this.$children</code>中符合规则的元素来初始化<code>navList</code>和<code>currentIndex</code>。</p>\n<p>接下来就要考虑修改当前页面，只有pane本身可以控制自己的显示和隐藏，所以我们打算在pane中提供一个<code>show</code>变量，并且作为<code>v-show</code>的条件。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'pane'</span>,&#123;</span><br><span class=\"line\">    props:[<span class=\"string\">'name'</span>,<span class=\"string\">'label'</span>,<span class=\"string\">'closable'</span>],</span><br><span class=\"line\">    template: <span class=\"string\">'&lt;div v-show=\"show\"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;'</span>,</span><br><span class=\"line\">    data: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">            show: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>我们考虑通过修改<code>currentIndex</code>，并监听这个变量来修改当前页面：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//...in methods</span></span><br><span class=\"line\">handleChange: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.currentIndex = i;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">update:<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">cur</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.getTabs().forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pane,index</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(index == cur)&#123;</span><br><span class=\"line\">            pane.show = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            pane.show = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//....</span></span><br><span class=\"line\">watch:&#123;</span><br><span class=\"line\">    currentIndex: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.update(val);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></p>\n<p>这样就完事了，不过我们要难度加大，再给它添加一个关闭功能。</p>\n<p>关闭功能，我们打算在pane中提供一个<code>alive</code>属性并且作为<code>v-if</code>的条件，并且在关闭时，tab会修改目标的<code>alive</code>属性。</p>\n<p>最后我们放出完整代码：</p>\n<p>index.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>TAB BAR<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">        .tab&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            display: inline-block;</span></span><br><span class=\"line\"><span class=\"undefined\">            border: #aaaaaa solid 1px;</span></span><br><span class=\"line\"><span class=\"undefined\">            padding: 10px 20px;</span></span><br><span class=\"line\"><span class=\"undefined\">            margin: 5px;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        .active&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            border-bottom: deepskyblue solid 2px;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        .pane-container&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            padding: 10px;</span></span><br><span class=\"line\"><span class=\"undefined\">            margin: 0 5px;</span></span><br><span class=\"line\"><span class=\"undefined\">            border: #aaa solid 1px;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        code&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            font-family: \"Fira Code\";</span></span><br><span class=\"line\"><span class=\"undefined\">            font-size: 0.8em;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        .close&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">            outline: none;</span></span><br><span class=\"line\"><span class=\"undefined\">            border: none;</span></span><br><span class=\"line\"><span class=\"undefined\">            background: rgba(0,0,0,0);</span></span><br><span class=\"line\"><span class=\"undefined\">            color: red;</span></span><br><span class=\"line\"><span class=\"undefined\">            font-size: 0.8em;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tab</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pane</span> <span class=\"attr\">label</span>=<span class=\"string\">\"FIRST\"</span> <span class=\"attr\">closable</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">                FIRST PANE</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                        var message = \"Helo,Vue\";<span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">                        console.log(message);</span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                        &gt;&gt;&gt; Helo,Vue</span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">pane</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pane</span> <span class=\"attr\">label</span>=<span class=\"string\">\"SECOND\"</span>&gt;</span></span><br><span class=\"line\">                SECOND PANE</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                        var message = \"Helo,Vue\";<span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">                        console.log(message);</span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                        &gt;&gt;&gt; Helo,Vue</span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">pane</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pane</span> <span class=\"attr\">label</span>=<span class=\"string\">\"THRID\"</span> <span class=\"attr\">closable</span>=<span class=\"string\">\"true\"</span>&gt;</span>THRID PANE<span class=\"tag\">&lt;/<span class=\"name\">pane</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">tab</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./pane.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./tabs.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> vm = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            el: <span class=\"string\">'#app'</span></span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>tab.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'tab'</span>,&#123;</span><br><span class=\"line\">   template: <span class=\"string\">'&lt;div&gt;'</span> +</span><br><span class=\"line\">       <span class=\"string\">'&lt;div class=\"tab\" v-for=\"(nav,index) in navList\" @click=\"handleChange(index)\" :class=\"&#123;active: currentIndex == index&#125;\"&gt;&#123;&#123;nav.label&#125;&#125; &lt;button class=\"close\" @click.stop=\"closePane(index)\" v-if=\"nav.closable\"&gt;X&lt;/button&gt;&lt;/div&gt;'</span> +</span><br><span class=\"line\">       <span class=\"string\">'&lt;div class=\"pane-container\"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;'</span>+</span><br><span class=\"line\">       <span class=\"string\">'&lt;/div&gt;'</span>,</span><br><span class=\"line\">   methods: &#123;</span><br><span class=\"line\">      getTabs: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.$children.filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">child</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> child.$options.name === <span class=\"string\">\"pane\"</span> &amp;&amp; child.alive;</span><br><span class=\"line\">         &#125;)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      handleChange: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.currentIndex = i;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      closePane: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.navList.splice(i,<span class=\"number\">1</span>);</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.getTabs()[i].alive = <span class=\"literal\">false</span>;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.update(<span class=\"number\">0</span>);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      update:<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">cur</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.getTabs().forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pane,index</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(index == cur)&#123;</span><br><span class=\"line\">               pane.show = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">               pane.show = <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   watch:&#123;</span><br><span class=\"line\">      currentIndex: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.update(val);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   mounted: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> _this = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.getTabs().forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pane,index</span>) </span>&#123;</span><br><span class=\"line\">         _this.navList.push(&#123;</span><br><span class=\"line\">            name: pane.name || index,</span><br><span class=\"line\">            label: pane.label,</span><br><span class=\"line\">            closable: pane.closable</span><br><span class=\"line\">         &#125;)</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(_this.navList[index].closable)</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.currentIndex = <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   data: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">         navList: [],</span><br><span class=\"line\">         currentIndex: <span class=\"number\">-1</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>pane.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'pane'</span>,&#123;</span><br><span class=\"line\">    props:[<span class=\"string\">'name'</span>,<span class=\"string\">'label'</span>,<span class=\"string\">'closable'</span>],</span><br><span class=\"line\">    template: <span class=\"string\">'&lt;div v-if=\"alive\" v-show=\"show\"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;'</span>,</span><br><span class=\"line\">    data: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">            show: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            alive: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n","next":{"title":"Vue自定义命令","slug":"vue-custom-cmd"},"link":"http://lilpig.site/post/vue-component-exm/","toc":[{"title":"数字输入框","id":"数字输入框","index":"1","children":[{"title":"练习","id":"练习","index":"1.1"}]},{"title":"","id":"标签页","index":"2"}],"reward":true,"copyright":{"author":"LIL PIG","link":"<a href=\"http://lilpig.site/post/vue-component-exm/\" title=\"Vue组件实例\">http://lilpig.site/post/vue-component-exm/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}